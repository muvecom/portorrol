<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Portorrol Monitor IA</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #1a73e8;
            --neutral-color: #f8f9fa;
            --border-color: #dadce0;
            --text-color: #202124;
            --success-color: #34a853;
            --warning-color: #f9ab00;
            --danger-color: #ea4335;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Arial, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--text-color);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-placeholder {
            width: 150px;
            height: 60px;
            background-color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 14px;
            color: #666;
            text-align: center;
            padding: 5px;
        }
        
        h1 {
            font-size: 24px;
            font-weight: 500;
        }
        
        .period-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 160px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 4px;
            z-index: 1;
            margin-top: 5px;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown-item {
            padding: 10px 15px;
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background-color: var(--neutral-color);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 15px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 500;
        }
        
        .chart-container {
            position: relative;
            height: 200px;
            width: 100%;
            margin: 10px 0;
        }
        
        .sentiment-legend {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .sentiment-dots {
            display: flex;
            gap: 5px;
        }
        
        .sentiment-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .sentiment-positive {
            background-color: var(--success-color);
        }
        
        .sentiment-neutral {
            background-color: var(--warning-color);
        }
        
        .sentiment-negative {
            background-color: var(--danger-color);
        }
        
        .sentiment-unknown {
            background-color: #9aa0a6;
        }
        
        .sentiment-distribution {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .sentiment-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .sentiment-value {
            font-size: 18px;
            font-weight: 500;
        }
        
        .sentiment-label {
            font-size: 14px;
            color: #5f6368;
        }
        
        .leads-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .leads-table th, .leads-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .leads-table th {
            font-weight: 500;
            color: #5f6368;
        }
        
        .leads-table tr:last-child td {
            border-bottom: none;
        }
        
        .percentage-bar {
            display: flex;
            height: 24px;
            background-color: var(--neutral-color);
            border-radius: 12px;
            overflow: hidden;
            margin: 5px 0;
        }
        
        .percentage-fill {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 500;
        }
        
        .percentage-yes {
            background-color: var(--success-color);
        }
        
        .percentage-no {
            background-color: #dadce0;
        }
        
        .percentage-label {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .product-item {
            background-color: var(--neutral-color);
            border-radius: 4px;
            padding: 8px;
            text-align: center;
            font-size: 14px;
        }
        
        .conversations-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .conversations-table th, .conversations-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .conversations-table th {
            font-weight: 500;
            color: #5f6368;
            background-color: var(--neutral-color);
        }
        
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }
        
        .pagination-info {
            font-size: 14px;
            color: #5f6368;
        }
        
        .pagination-controls {
            display: flex;
            gap: 10px;
        }
        
        .pagination-btn {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 16px;
            color: #5f6368;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .sentiment-distribution {
                flex-direction: column;
                gap: 10px;
            }
            
            .sentiment-item {
                flex-direction: row;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo-placeholder" id="logo-placeholder">
                    Logo da Portorrol<br>
                    <small>Insira a URL da imagem</small>
                </div>
                <h1>Monitor IA - Portorrol</h1>
            </div>
            <div class="period-selector">
                <div class="dropdown">
                    <div class="dropdown-btn">
                        <span>Selecionar período</span>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="dropdown-content">
                        <div class="dropdown-item">Últimos 7 dias</div>
                        <div class="dropdown-item">Últimos 30 dias</div>
                        <div class="dropdown-item">Últimos 90 dias</div>
                        <div class="dropdown-item">Personalizado</div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="stats-grid">
            <!-- Card de Transição de Sentimento -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Transição de Sentimento dos Clientes</div>
                </div>
                <div class="chart-container">
                    <canvas id="sentimentTransitionChart"></canvas>
                </div>
                <div class="sentiment-legend">
                    <div class="legend-item">
                        <span>Legenda:</span>
                    </div>
                    <div class="legend-item">
                        <div class="sentiment-dots">
                            <div class="sentiment-dot sentiment-positive"></div>
                            <div class="sentiment-dot sentiment-positive"></div>
                        </div>
                        <span>Positivo</span>
                    </div>
                    <div class="legend-item">
                        <div class="sentiment-dots">
                            <div class="sentiment-dot sentiment-neutral"></div>
                            <div class="sentiment-dot sentiment-neutral"></div>
                        </div>
                        <span>Neutro</span>
                    </div>
                    <div class="legend-item">
                        <div class="sentiment-dots">
                            <div class="sentiment-dot sentiment-negative"></div>
                            <div class="sentiment-dot sentiment-negative"></div>
                        </div>
                        <span>Negativo</span>
                    </div>
                </div>
            </div>
            
            <!-- Card de Distribuição do Sentimento -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Sentimento do Cliente ao Final do Atendimento</div>
                </div>
                <div class="chart-container">
                    <canvas id="sentimentDistributionChart"></canvas>
                </div>
            </div>
            
            <!-- Card de Top 3 Objeções -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Top 3 Objeções dos Clientes</div>
                </div>
                <div class="chart-container">
                    <canvas id="objectionsChart"></canvas>
                </div>
            </div>
            
            <!-- Card de Top 3 Produtos -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Top 3 Produtos Mais Buscados</div>
                </div>
                <div class="chart-container">
                    <canvas id="productsChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Seção de Análise de Atendentes -->
        <div class="card" style="margin-bottom: 20px;">
            <div class="card-header">
                <div class="card-title">Análise de Conhecimento Técnico e Capacidade de Persuasão dos Atendentes</div>
            </div>
            <div class="chart-container">
                <canvas id="attendantAnalysisChart"></canvas>
            </div>
        </div>
        
        <!-- Seção de Produtos mais buscados -->
        <div class="card" style="margin-bottom: 20px;">
            <div class="card-header">
                <div class="card-title">Produtos mais buscados</div>
            </div>
            <div class="products-grid" id="popular-products">
                <!-- Conteúdo será preenchido dinamicamente -->
            </div>
        </div>
        
        <!-- Seção de Objeções -->
        <div class="card" style="margin-bottom: 20px;">
            <div class="card-header">
                <div class="card-title">Objeções</div>
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
                <div>
                    <div class="card-title">Preço Elevado</div>
                    <div id="high-price">
                        <!-- Conteúdo será preenchido dinamicamente -->
                    </div>
                </div>
                <div>
                    <div class="card-title">Prazo de Entrega</div>
                    <div id="delivery-time">
                        <!-- Conteúdo será preenchido dinamicamente -->
                    </div>
                </div>
                <div>
                    <div class="card-title">Qualidade do Produto</div>
                    <div id="product-quality">
                        <!-- Conteúdo será preenchido dinamicamente -->
                    </div>
                </div>
                <div>
                    <div class="card-title">Disponibilidade</div>
                    <div id="availability">
                        <!-- Conteúdo será preenchido dinamicamente -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Seção de Resumo das Conversas -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">Resumo das Conversas</div>
            </div>
            <table class="conversations-table" id="conversations-table">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Sessão</th>
                        <th>Resumo</th>
                        <th>Sentimento</th>
                    </tr>
                </thead>
                <tbody id="conversations-body">
                    <!-- Conteúdo será preenchido dinamicamente -->
                </tbody>
            </table>
            <div class="pagination">
                <div class="pagination-info" id="pagination-info">1 - 100 / 511</div>
                <div class="pagination-controls">
                    <button class="pagination-btn" id="prev-page">Anterior</button>
                    <button class="pagination-btn" id="next-page">Próxima</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados de exemplo adaptados para uma loja de rolamentos
        const sampleData = {
            "totalConversations": 574,
            "sentimentTransitions": [
                {"from": "neutral", "to": "neutral", "count": 300},
                {"from": "positive", "to": "neutral", "count": 200},
                {"from": "positive", "to": "positive", "count": 59},
                {"from": "neutral", "to": "positive", "count": 150},
                {"from": "neutral", "to": "negative", "count": 50},
                {"from": "negative", "to": "negative", "count": 24},
                {"from": "positive", "to": "negative", "count": 10},
                {"from": "positive", "to": "unknown", "count": 5},
                {"from": "unknown", "to": "unknown", "count": 3}
            ],
            "finalSentiment": {
                "positive": 59,
                "neutral": 488,
                "negative": 24
            },
            "topObjections": [
                {"objection": "Preço Elevado", "count": 45},
                {"objection": "Prazo de Entrega", "count": 32},
                {"objection": "Qualidade", "count": 18}
            ],
            "topProducts": [
                {"product": "Rolamento de Roda", "count": 120},
                {"product": "Rolamento AXK", "count": 85},
                {"product": "Rolamento de Embreagem", "count": 65}
            ],
            "attendantAnalysis": [
                {"attendant": "João Silva", "technical": 85, "persuasion": 78},
                {"attendant": "Maria Santos", "technical": 92, "persuasion": 85},
                {"attendant": "Pedro Costa", "technical": 76, "persuasion": 82},
                {"attendant": "Ana Oliveira", "technical": 88, "persuasion": 79}
            ],
            "popularProducts": [
                "Rolamento de Roda", "Rolamento AXK", "Rolamento de Embreagem", 
                "Rolamento de Direção", "Rolamento de Transmissão", "Rolamento de Motor",
                "Rolamento de Correia", "Rolamento de Polia", "Rolamento de Eixo",
                "Rolamento de Cubo", "Rolamento de Pinhão", "Rolamento de Esferas",
                "Rolamento de Rolos", "Rolamento de Agulhas", "Rolamento de Contato Angular",
                "Outros"
            ],
            "objections": {
                "highPrice": {"yes": 18, "no": 82},
                "deliveryTime": {"yes": 12, "no": 88},
                "productQuality": {"yes": 8, "no": 92},
                "availability": {"yes": 15, "no": 85}
            },
            "conversations": [
                {
                    "date": "09, outubro 20...",
                    "session": "8174e8cc-...",
                    "summary": "O cliente, interessado em rolamentos de roda para seu caminhão, buscou informações sobre preços e disponibilidade...",
                    "sentiment": {"from": "positive", "to": "negative"}
                },
                {
                    "date": "09, outubro 20...",
                    "session": "d1afb272-...",
                    "summary": "O cliente Giuseppe manifestou interesse inicialmente em adquirir rolamentos AXK para sua máquina industrial...",
                    "sentiment": {"from": "positive", "to": "positive"}
                },
                {
                    "date": "09, outubro 20...",
                    "session": "c0b9c795-...",
                    "summary": "O cliente iniciou contato solicitando o catálogo de produtos da Portorrol para comparar especificações técnicas...",
                    "sentiment": {"from": "neutral", "to": "neutral"}
                }
                // Mais conversas seriam adicionadas aqui
            ],
            "pagination": {
                "currentPage": 1,
                "totalPages": 6,
                "itemsPerPage": 100,
                "totalItems": 511
            }
        };

        // Função para renderizar o gráfico de transição de sentimento
        function renderSentimentTransitionChart(data) {
            const ctx = document.getElementById('sentimentTransitionChart').getContext('2d');
            
            // Preparar dados para o gráfico de pizza
            const labels = data.map(item => `${item.from} → ${item.to}`);
            const counts = data.map(item => item.count);
            
            // Cores para diferentes transições
            const backgroundColors = data.map(item => {
                if (item.from === 'positive' && item.to === 'positive') {
                    return '#34a853'; // Verde
                } else if (item.from === 'neutral' && item.to === 'neutral') {
                    return '#f9ab00'; // Amarelo
                } else if (item.from === 'negative' && item.to === 'negative') {
                    return '#ea4335'; // Vermelho
                } else if (item.from === 'positive' && item.to === 'negative') {
                    return '#ff6b6b'; // Vermelho claro
                } else if (item.from === 'negative' && item.to === 'positive') {
                    return '#51cf66'; // Verde claro
                } else {
                    return '#9aa0a6'; // Cinza
                }
            });
            
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: backgroundColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                boxWidth: 12,
                                font: {
                                    size: 10
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Função para renderizar o gráfico de distribuição de sentimento
        function renderSentimentDistributionChart(data) {
            const ctx = document.getElementById('sentimentDistributionChart').getContext('2d');
            
            const labels = Object.keys(data).map(key => {
                if (key === 'positive') return 'Positivo';
                if (key === 'neutral') return 'Neutro';
                if (key === 'negative') return 'Negativo';
                return key;
            });
            
            const counts = Object.values(data);
            
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            '#34a853', // Verde para positivo
                            '#f9ab00', // Amarelo para neutro
                            '#ea4335'  // Vermelho para negativo
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Função para renderizar o gráfico de objeções
        function renderObjectionsChart(data) {
            const ctx = document.getElementById('objectionsChart').getContext('2d');
            
            const labels = data.map(item => item.objection);
            const counts = data.map(item => item.count);
            
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            '#ff6b6b',
                            '#ffa8a8',
                            '#ffc9c9'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Função para renderizar o gráfico de produtos
        function renderProductsChart(data) {
            const ctx = document.getElementById('productsChart').getContext('2d');
            
            const labels = data.map(item => item.product);
            const counts = data.map(item => item.count);
            
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: [
                            '#4dabf7',
                            '#339af0',
                            '#1c7ed6'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }

        // Função para renderizar a análise de atendentes
        function renderAttendantAnalysisChart(data) {
            const ctx = document.getElementById('attendantAnalysisChart').getContext('2d');
            
            const labels = data.map(item => item.attendant);
            const technicalData = data.map(item => item.technical);
            const persuasionData = data.map(item => item.persuasion);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Conhecimento Técnico',
                            data: technicalData,
                            backgroundColor: '#4dabf7',
                            borderColor: '#339af0',
                            borderWidth: 1
                        },
                        {
                            label: 'Capacidade de Persuasão',
                            data: persuasionData,
                            backgroundColor: '#ffa94d',
                            borderColor: '#ff922b',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Pontuação (%)'
                            }
                        }
                    }
                }
            });
        }

        // Função para renderizar produtos mais buscados
        function renderPopularProducts(data) {
            const container = document.getElementById('popular-products');
            container.innerHTML = '';
            
            data.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                productItem.textContent = product;
                container.appendChild(productItem);
            });
        }

        // Função para renderizar objeções
        function renderObjections(data) {
            // Preço Elevado
            renderPercentageBar('high-price', 'Preço Elevado', data.highPrice);
            
            // Prazo de Entrega
            renderPercentageBar('delivery-time', 'Prazo de Entrega', data.deliveryTime);
            
            // Qualidade do Produto
            renderPercentageBar('product-quality', 'Qualidade do Produto', data.productQuality);
            
            // Disponibilidade
            renderPercentageBar('availability', 'Disponibilidade', data.availability);
        }

        // Função auxiliar para renderizar barras de porcentagem
        function renderPercentageBar(containerId, title, data) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const bar = document.createElement('div');
            bar.className = 'percentage-bar';
            
            const yesFill = document.createElement('div');
            yesFill.className = 'percentage-fill percentage-yes';
            yesFill.style.width = `${data.yes}%`;
            yesFill.textContent = `${data.yes}%`;
            
            const noFill = document.createElement('div');
            noFill.className = 'percentage-fill percentage-no';
            noFill.style.width = `${data.no}%`;
            noFill.textContent = `${data.no}%`;
            
            bar.appendChild(yesFill);
            bar.appendChild(noFill);
            
            const label = document.createElement('div');
            label.className = 'percentage-label';
            
            const yesLabel = document.createElement('span');
            yesLabel.textContent = 'Sim';
            
            const noLabel = document.createElement('span');
            noLabel.textContent = 'Não';
            
            label.appendChild(yesLabel);
            label.appendChild(noLabel);
            
            container.appendChild(bar);
            container.appendChild(label);
        }

        // Função para renderizar conversas
        function renderConversations(data) {
            const container = document.getElementById('conversations-body');
            container.innerHTML = '';
            
            data.forEach(conversation => {
                const row = document.createElement('tr');
                
                const cellDate = document.createElement('td');
                cellDate.textContent = conversation.date;
                
                const cellSession = document.createElement('td');
                cellSession.textContent = conversation.session;
                
                const cellSummary = document.createElement('td');
                cellSummary.textContent = conversation.summary;
                
                const cellSentiment = document.createElement('td');
                
                const sentimentDots = document.createElement('div');
                sentimentDots.className = 'sentiment-dots';
                
                const fromDot = document.createElement('div');
                fromDot.className = `sentiment-dot sentiment-${conversation.sentiment.from}`;
                
                const toDot = document.createElement('div');
                toDot.className = `sentiment-dot sentiment-${conversation.sentiment.to}`;
                
                sentimentDots.appendChild(fromDot);
                sentimentDots.appendChild(toDot);
                cellSentiment.appendChild(sentimentDots);
                
                row.appendChild(cellDate);
                row.appendChild(cellSession);
                row.appendChild(cellSummary);
                row.appendChild(cellSentiment);
                container.appendChild(row);
            });
        }

        // Função para renderizar informações de paginação
        function renderPagination(data) {
            const container = document.getElementById('pagination-info');
            const startItem = (data.currentPage - 1) * data.itemsPerPage + 1;
            const endItem = Math.min(data.currentPage * data.itemsPerPage, data.totalItems);
            
            container.textContent = `${startItem} - ${endItem} / ${data.totalItems}`;
        }

        // Função para carregar dados do webhook
        async function loadDataFromWebhook() {
            try {
                // Substitua esta URL pela URL do seu webhook
                const response = await fetch('https://api.muvecom.com.br/v1/71ae25a3-1d51-4e4a-91d6-aa90a23ae42b');
                const data = await response.json();
                
                // Renderizar todos os componentes com os dados
                renderSentimentTransitionChart(data.sentimentTransitions);
                renderSentimentDistributionChart(data.finalSentiment);
                renderObjectionsChart(data.topObjections);
                renderProductsChart(data.topProducts);
                renderAttendantAnalysisChart(data.attendantAnalysis);
                renderPopularProducts(data.popularProducts);
                renderObjections(data.objections);
                renderConversations(data.conversations);
                renderPagination(data.pagination);
                
            } catch (error) {
                console.error('Erro ao carregar dados do webhook:', error);
                // Em caso de erro, usar dados de exemplo
                useSampleData();
            }
        }

        // Função para usar dados de exemplo
        function useSampleData() {
            renderSentimentTransitionChart(sampleData.sentimentTransitions);
            renderSentimentDistributionChart(sampleData.finalSentiment);
            renderObjectionsChart(sampleData.topObjections);
            renderProductsChart(sampleData.topProducts);
            renderAttendantAnalysisChart(sampleData.attendantAnalysis);
            renderPopularProducts(sampleData.popularProducts);
            renderObjections(sampleData.objections);
            renderConversations(sampleData.conversations);
            renderPagination(sampleData.pagination);
        }

        // Função para carregar logo
        function loadLogo() {
            const logoPlaceholder = document.getElementById('logo-placeholder');
            
            // Verificar se há uma URL de logo armazenada
            const logoUrl = localStorage.getItem('portorrol-logo-url');
            
            if (logoUrl) {
                logoPlaceholder.innerHTML = `<img src="${logoUrl}" alt="Logo Portorrol" style="max-width: 100%; max-height: 100%;">`;
            } else {
                // Permitir que o usuário insira a URL da logo
                logoPlaceholder.addEventListener('click', function() {
                    const url = prompt('Insira a URL da logo da Portorrol:');
                    if (url) {
                        localStorage.setItem('portorrol-logo-url', url);
                        logoPlaceholder.innerHTML = `<img src="${url}" alt="Logo Portorrol" style="max-width: 100%; max-height: 100%;">`;
                    }
                });
            }
        }

        // Inicializar a página
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar logo
            loadLogo();
            
            // Carregar dados do webhook
            loadDataFromWebhook();
            
            // Configurar eventos de paginação
            document.getElementById('prev-page').addEventListener('click', function() {
                // Lógica para carregar página anterior
                console.log('Carregar página anterior');
            });
            
            document.getElementById('next-page').addEventListener('click', function() {
                // Lógica para carregar próxima página
                console.log('Carregar próxima página');
            });
        });
    </script>
</body>
</html>
